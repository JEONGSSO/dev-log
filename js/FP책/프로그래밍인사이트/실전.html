<script src="../../FP/fp.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<div id="root">
  <button class="remove">sadsad</button>
  <ul class="item_list">
    <li data-item_id="1">
      <input type="checkbox" checked />
    </li>
    <li data-item_id="2">
      <input type="checkbox" />
    </li>
    <li data-item_id="3">
      <input type="checkbox" />
    </li>
  </ul>
</div>

<style>
  .confirm {
    background-color: antiquewhite;
  }
</style>

<script>
  $('#root').on(
    'click',
    '> button.remove',
    pipe(
      () => $('#root .item_list input:checked'),
      map((a) => parseInt(a.closest('li').dataset.item_id)),
      map((a) =>
        $.ajax(`http://localhost:3002/item/${a}`, 'delete').catch((e) =>
          console.log(e)
        )
      )
    )
  );
</script>
